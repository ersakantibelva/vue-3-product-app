import{_ as T,r as B,a as y,c as P,u as O,o as D,b as l,d as o,t as d,e as v,f as U,w as _,g as q,B as h,h as L,i as u,j as m,v as b,n as f,k as I,F as M,l as $,m as n,p as k}from"./index-CSdh8TL8.js";const z={class:"form-container"},H={class:"form-card"},J={class:"form-title"},A={key:0,class:"success-message"},G={class:"form-group"},K=["disabled"],Q={key:0,class:"error-text"},W={class:"form-group"},X=["disabled"],Y={key:0,class:"error-text"},Z={class:"form-group"},ee=["disabled"],te={key:0,class:"error-text"},re={class:"form-group"},se=["disabled"],oe=["value"],ie={key:0,class:"error-text"},ae={class:"form-group"},le=["disabled"],ne={key:0,class:"error-text"},de={key:0,class:"image-preview"},ce=["src"],ue={key:1,class:"error-message"},pe={class:"form-actions"},me={__name:"FormView",setup(fe){const c=O(),V=q(),E=B(["electronics","jewelery","men's clothing","women's clothing"]),t=y({title:"",description:"",price:"",category:"",image:""}),a=y({loading:!1,success:!1,error:null}),r=y({title:"",description:"",price:"",category:"",image:""}),w=y({id:null,title:null,description:null,price:null,category:null,image:null}),j=P(()=>c.params.id?"Update Product":"Create New Product"),N=P(()=>c.params.id?"Update":"Create");D(async()=>{c.params.id&&C(c.params.id)});const C=async s=>{try{const e=await fetch(`https://fakestoreapi.com/products/${s}`);if(!e.ok)throw new Error("Network response was not ok");const i=await e.json();for(const[p,g]of Object.entries(t))t[p]=i[p],w[p]=i[p]}catch(e){console.error("Error get product:",e)}},F=()=>{let s=!0;return Object.keys(r).forEach(e=>{r[e]=""}),t.title.trim()||(r.title="Title is required",s=!1),t.description.trim()||(r.description="Description is required",s=!1),t.price?(isNaN(t.price)||Number(t.price)<=0)&&(r.price="Price must be a positive number",s=!1):(r.price="Price is required",s=!1),t.category||(r.category="Category is required",s=!1),t.image.trim()?x(t.image)||(r.image="Please enter a valid URL",s=!1):(r.image="Image URL is required",s=!1),s},x=s=>{try{return new URL(s),!0}catch{return!1}},R=async()=>{if(F()){a.loading=!0,a.success=!1,a.error=null;try{let s="https://fakestoreapi.com/products",e="POST";c.params.id&&(s+=`/${c.params.id}`,e="PUT");const i=await fetch(s,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t.title,price:Number(t.price),description:t.description,category:t.category,image:t.image})});if(!i.ok){let g="Failed to create product";if(c.params.id){let ge="Failed to update product"}throw new Error(g)}const p=await i.json();Object.keys(t).forEach(g=>{t[g]=""}),a.success=!0}catch(s){let e="Error creating product:";c.params.id,console.error(e,s),a.error=s.message}finally{a.loading=!1}}},S=()=>{Object.keys(t).forEach(s=>{t[s]=w[s]||""}),Object.keys(r).forEach(s=>{r[s]=""}),a.success=!1,a.error=null};return(s,e)=>(n(),l("div",z,[o("div",H,[o("h1",J,d(j.value),1),a.success?(n(),l("div",A,[o("p",null," Product "+d(U(c).params.id?"updated":"created")+" successfully! ",1),v(h,{variant:"secondary",onClick:e[0]||(e[0]=i=>U(V).push("/"))},{default:_(()=>e[6]||(e[6]=[k(" Back to Home ")])),_:1})])):(n(),l("form",{key:1,onSubmit:L(R,["prevent"]),class:"product-form"},[o("div",G,[e[7]||(e[7]=o("label",{for:"title"},"Product Title",-1)),m(o("input",{type:"text",id:"title","onUpdate:modelValue":e[1]||(e[1]=i=>t.title=i),placeholder:"Enter product title",disabled:a.loading,class:f({"input-error":r.title})},null,10,K),[[b,t.title]]),r.title?(n(),l("p",Q,d(r.title),1)):u("",!0)]),o("div",W,[e[8]||(e[8]=o("label",{for:"description"},"Description",-1)),m(o("textarea",{id:"description","onUpdate:modelValue":e[2]||(e[2]=i=>t.description=i),placeholder:"Enter product description",rows:"4",disabled:a.loading,class:f({"input-error":r.description})},null,10,X),[[b,t.description]]),r.description?(n(),l("p",Y,d(r.description),1)):u("",!0)]),o("div",Z,[e[9]||(e[9]=o("label",{for:"price"},"Price ($)",-1)),m(o("input",{type:"number",id:"price","onUpdate:modelValue":e[3]||(e[3]=i=>t.price=i),placeholder:"0.00",step:"0.01",min:"0",disabled:a.loading,class:f({"input-error":r.price})},null,10,ee),[[b,t.price]]),r.price?(n(),l("p",te,d(r.price),1)):u("",!0)]),o("div",re,[e[11]||(e[11]=o("label",{for:"category"},"Category",-1)),m(o("select",{id:"category","onUpdate:modelValue":e[4]||(e[4]=i=>t.category=i),class:f({"input-error":r.category}),disabled:a.loading},[e[10]||(e[10]=o("option",{value:"",disabled:""},"Select a category",-1)),(n(!0),l(M,null,$(E.value,i=>(n(),l("option",{key:i,value:i},d(i),9,oe))),128))],10,se),[[I,t.category]]),r.category?(n(),l("p",ie,d(r.category),1)):u("",!0)]),o("div",ae,[e[12]||(e[12]=o("label",{for:"image"},"Image URL",-1)),m(o("input",{type:"url",id:"image","onUpdate:modelValue":e[5]||(e[5]=i=>t.image=i),placeholder:"https://example.com/image.jpg",disabled:a.loading,class:f({"input-error":r.image})},null,10,le),[[b,t.image]]),r.image?(n(),l("p",ne,d(r.image),1)):u("",!0)]),t.image&&x(t.image)?(n(),l("div",de,[e[13]||(e[13]=o("h3",null,"Image Preview",-1)),o("img",{src:t.image,alt:"Product preview"},null,8,ce)])):u("",!0),a.error?(n(),l("div",ue,[o("p",null,d(a.error),1)])):u("",!0),o("div",pe,[v(h,{type:"button",variant:"outline",disabled:a.loading,onClick:S},{default:_(()=>e[14]||(e[14]=[k(" Reset ")])),_:1},8,["disabled"]),v(h,{type:"submit",variant:"primary",disabled:a.loading},{default:_(()=>[k(d(N.value),1)]),_:1},8,["disabled"])])],32))])]))}},be=T(me,[["__scopeId","data-v-030966a6"]]);export{be as default};
